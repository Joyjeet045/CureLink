{% extends "base.html" %} 
{% block content %}
<style>
  h2 {
  font-size: 24px; /* Adjust the font size as needed */
  font-weight: bold;
  text-align: center; /* Center the text */
  margin-top: 20px; /* Add some top margin for spacing */
  text-decoration: underline; /* Underline the text */
}
  /* Define a flex container for the doctor profiles */
  .doctor-profile-container {
    display: flex;
    flex-wrap: wrap; /* Allows the profiles to wrap to the next line if the container width is limited */
    justify-content: space-between; /* Adjust this based on your preferred alignment */
  }

  /* Doctor Profile Styles (same as before) */
  .doctor-profile {
    max-width: 400px;
    margin: 0 10px 20px; /* Add some margin between profiles */
    padding: 20px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    text-align: center;
  }

  .doctor-profile h1 {
    font-size: 24px;
    margin-bottom: 10px;
  }

  .profile-pic {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin: 0 auto 20px;
  }

  .department,
  .timings,
  .qualifications {
    font-size: 18px;
    margin-bottom: 10px;
  }

  /* Button Styles */
  .full-profile-button {
    display: inline-block;
    padding: 10px 20px;
    background-color: #007BFF;
    color: #fff;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    text-decoration: none;
    margin-top: 20px;
  }

  .full-profile-button:hover {
    background-color: #0056b3;
  }
  .book-appointment-button {
    display: inline-block;
    padding: 10px 20px;
    background-color: #e61c1c;
    color: #fff;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    text-decoration: none;
    margin-top: 20px;
  }

  .book-appointment-button:hover {
    background-color: darkred; /* Change color on hover */
  }
  /* Custom CSS for hospital cards */
  .custom-hospital-card {
    background-color: #f8f9fa; /* Background color */
    border: 1px solid #ced4da; /* Border color */
    border-radius: 5px; /* Rounded corners */
    padding: 10px; /* Spacing inside the card */
    transition: transform 0.2s; /* Smooth hover effect */
    display: flex; /* Use flexbox to ensure equal height and width */
    flex-direction: column; /* Arrange content vertically */
    height: 100%; /* Ensure the card takes full height of its container */
  }

  .custom-hospital-card:hover {
    transform: scale(1.05); /* Scale up on hover */
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* Box shadow on hover */
  }

  /* Adjustments for card title and description */
  .custom-hospital-card .card-title {
    font-size: 1.2rem; /* Title font size */
    font-weight: bold; /* Bold text */
  }

  .custom-hospital-card .card-text {
    font-size: 1rem; /* Description font size */
  }
  .star-rating {
    font-size: 24px; 
    color: #f0d417; /* Default star color */
}

.star-rating.filled {
    color: #f0d417; /* Filled star color */
}
.no-doctors-message {
    font-size: 18px;
    color: #FF0000; 
    text-align: center;
    margin-top: 20px;
    font-weight: bold;
    width: 100vw;
  }
  .row.equal-height {
    display: flex;
    flex-wrap: wrap;
    align-items: stretch;
  }
  .col-md-4.equal-height-col {
    display: flex;
    flex-direction: column;
    height: 100%;
    margin-top: 10px;
  }
  .custom-hospital-card {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 520px;
    max-height: 100%;
  }
  .card-img-top {
    width: 100%;
    height: 220px;
    object-fit: cover;
    object-position: center;
    background: #fff;
    border-radius: 5px 5px 0 0;
  }
  .custom-hospital-card .card-body {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  }
  .card-title {
    font-size: 1.2rem;
    font-weight: bold;
    margin-bottom: 0.5rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .description-container {
    flex: 1 1 auto;
    margin-bottom: 0.5rem;
  }
  .card-text.description-text {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }
  .star-rating {
    font-size: 24px;
    color: #f0d417;
    margin-bottom: 0.5rem;
  }
  .btn-block {
    width: 100%;
    margin-bottom: 0.5rem;
  }
</style>


<div class="row mt-4">
  <div class="col-md-12">
    <form method="GET" action="">
      <label for="state" style="color: #007BFF; font-weight: bold;">Filter by State:</label>
      <select name="state" id="state" class="form-control" style="border-color: #007BFF;" onchange="this.form.submit();">
        <option value="">All</option>
        {% for state in states %}
          <option value="{{ state.id }}" {% if request.GET.state == state.id|stringformat:'s' %}selected{% endif %}>{{ state.name }}</option>
        {% endfor %}
      </select>
    </form>
  </div>
</div>

<div class="row mt-4 equal-height">
  {% for hospital in hospitals %}
  <div class="col-md-4 equal-height-col">
    <div class="card mb-4 shadow-sm custom-hospital-card">
      <img src="{{ hospital.get_url }}" alt="{{ hospital.name }}" class="card-img-top">
      <div class="card-body">
        <h5 class="card-title">{{ hospital.name }}</h5>
        <div class="description-container">
          <p class="card-text description-text">{{ hospital.description }}</p>
          <a href="#" class="read-more-link">Read more</a>
        </div>
        <div class="star-rating">
          {% for i in list %}
          {% if i <= hospital.average_doctor_rating %}
          <i class="fas fa-star filled"></i>
          {% else %}
          <i class="far fa-star"></i>
          {% endif %}
          {% endfor %}
        </div>
        <a href="{% url 'view_all_doctors' hospital.id %}" class="btn btn-primary btn-block">View All Doctors</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
<div class="pagination" style="margin:20px" >
  <span class="step-links" style="margin-left: auto;margin-right: auto;">
      {% if hospitals.has_previous %}
          <a href="?page=1{% if request.GET.state %}&state={{ request.GET.state }}{% endif %}" class="btn btn-primary">&laquo; first</a>
          <span style="margin: 0 10px;font-size: medium;">|</span>
          <a href="?page={{ hospitals.previous_page_number }}{% if request.GET.state %}&state={{ request.GET.state }}{% endif %}" class="btn btn-primary">previous</a>
      {% endif %}

      <span class="current-page" style="margin: 0 10px;">
          Page {{ hospitals.number }} of {{ hospitals.paginator.num_pages }}.
      </span>

      {% if hospitals.has_next %}
          <a href="?page={{ hospitals.next_page_number }}{% if request.GET.state %}&state={{ request.GET.state }}{% endif %}" class="btn btn-primary">next</a>
          <span style="margin: 0 10px;font-size: medium;">|</span>
          <a href="?page={{ hospitals.paginator.num_pages }}{% if request.GET.state %}&state={{ request.GET.state }}{% endif %}" class="btn btn-primary">last &raquo;</a>
      {% endif %}
  </span>
</div>

  
{% endblock %}


